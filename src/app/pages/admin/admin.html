<div class="container">
  <mat-card appearance="outlined">
    <mat-card-header>
      <mat-card-title>Gerência: Abertura de Conta</mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="formConta" (ngSubmit)="criarConta()" class="form-grid">
        <mat-form-field appearance="outline" floatLabel="always">
          <mat-label>Nome do Titular </mat-label>
          <input matInput formControlName="titular">
          @if (formConta.controls.titular.errors?.['required']) {
            <mat-error>Nome é obrigatório</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline" floatLabel="always">
          <mat-label>CPF </mat-label>
          <input matInput formControlName="cpf" maxlength="11">
        </mat-form-field>

        <button mat-flat-button color="primary" [disabled]="formConta.invalid || carregando()">
          CADASTRAR CLIENTE
        </button>
      </form>
    </mat-card-content>
  </mat-card>

  <hr class="divider">

 <div class="container">
  <hr class="divider">

  <h3>Contas Ativas</h3>

  <div class="mat-elevation-z2">
    <table mat-table [dataSource]="contas()">

      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef> ID </th>
        <td mat-cell *matCellDef="let c"> {{ c.id }} </td>
      </ng-container>

      <ng-container matColumnDef="numero">
        <th mat-header-cell *matHeaderCellDef> Número </th>
        <td mat-cell *matCellDef="let c"> {{ c.numero }} </td>
      </ng-container>

      <ng-container matColumnDef="titular">
        <th mat-header-cell *matHeaderCellDef> Titular </th>
        <td mat-cell *matCellDef="let c"> {{ c.titular }} </td>
      </ng-container>

      <ng-container matColumnDef="cpf">
        <th mat-header-cell *matHeaderCellDef> CPF </th>
        <td mat-cell *matCellDef="let c"> {{ c.cpf | cpf }} </td>
      </ng-container>

      <ng-container matColumnDef="saldo">
        <th mat-header-cell *matHeaderCellDef> Saldo </th>
        <td mat-cell *matCellDef="let c"> {{ c.saldo | currency:'BRL' }} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" colspan="5" style="text-align: center; padding: 20px;">
          @if (carregando()) { Carregando contas... }
          @else { Nenhuma conta encontrada no sistema. }
        </td>
      </tr>
    </table>

<mat-paginator
  [length]="totalElements()"
  [pageSize]="pageSize()"
  [pageIndex]="paginaAtual()"
  [pageSizeOptions]="[5, 10, 20]"
  (page)="mudarPagina($event)"
  aria-label="Selecionar página">
</mat-paginator>
  </div>
</div>
